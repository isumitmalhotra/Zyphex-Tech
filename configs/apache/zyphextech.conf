<VirtualHost *:80>
    ServerName www.zyphextech.com
    ServerAlias zyphextech.com
    ServerAdmin admin@zyphextech.com

    # Proxy to Next.js application
    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    # WebSocket support
    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) "ws://localhost:3000/$1" [P,L]

    # Logging
    ErrorLog /var/log/httpd/zyphextech-error.log
    CustomLog /var/log/httpd/zyphextech-access.log combined

    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</VirtualHost>

# SSL configuration will be added automatically by Certbot
